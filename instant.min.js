!function(t){"use strict";var s={a:"àáâãäå",e:"èéêë",i:"ìíîï",o:"òóôõö",u:"ùúûü",c:"ç",n:"ñ",A:"ÀÁÂÃÄÅ",E:"ÈÉÊË",I:"ÌÍÎÏ",O:"ÒÓÔÕÖ",U:"ÙÚÛÜ",C:"Ç",N:"Ñ"},i=function(t){var i=t;for(var e in s){var n=new RegExp("["+s[e]+"]","g");i=i.replace(n,e)}return i};t.instant=function(s,e){var n=this;n.$el=t(s),n.$wrapper=!1,n.$list=!1,n.$hiddenInput=!1,n.$el.attr("data-options")&&t.extend(e.listOptions,n.$el.data("options")),n.set=t.extend({accentsInsensitive:!0,attributes:!1,callback:!1,caseInsensitive:!0,formName:"hidden-"+n.$el.data("name"),listOptions:{}},e),n.createDOM=function(){n.$wrapper=t("<span>").addClass("instant_wrapper"),n.$list=t("<ul>").addClass("instant_list"),n.$hiddenInput=t("<input>").attr({type:"hidden",name:n.set.formName}),n.$el.attr(n.set.attributes),n.$el.wrap(n.$wrapper),n.$el.after(n.$list,n.$hiddenInput)},n.generateList=function(){n.$list.empty();for(var s in n.set.listOptions){var i=t("<li>");i.attr("value",s).text(n.set.listOptions[s]),n.$list.append(i)}},n.browseList=function(s){n.set.caseInsensitive&&(s=s.toLowerCase()),n.set.accentsInsensitive&&(s=i(s));var e=n.$list.find("li");e.each(function(){var e=t(this),a=e.text();n.set.caseInsensitive&&(a=a.toLowerCase()),n.set.accentsInsensitive&&(a=i(a)),-1!==a.indexOf(s)?e.addClass("visible").show():e.removeClass("visible").hide()}),e.removeClass("focus"),e.filter(".visible").first().addClass("focus")},n.init=function(){n.createDOM(),n.generateList()},n.init()},t.fn.instant=function(s){return this.each(function(){var i=new t.instant(this,s);i.$el.on("focusin",function(){i.$list.show();var t=i.$list.find("li");t.is(".focus")||t.filter(":visible:first").addClass("focus")}).on("focusout",function(){i.$list.hide()}).on("keydown",function(t){var s=i.$list.find(".focus"),e={13:function(){s.trigger("select")},38:function(){var t=i.$list.find("li:visible:first");s.is(t)||s.removeClass("focus").prevAll(":visible").first().addClass("focus")},40:function(){var t=i.$list.find("li:visible:last");s.is(t)||s.removeClass("focus").nextAll(":visible").first().addClass("focus")}};if(void 0!==e[t.which])return t.preventDefault(),e[t.which](),!1}).on("keyup",function(s){if(13==s.which||38==s.which||40==s.which)return s.preventDefault(),!1;i.$hiddenInput.val("");var e=i.$el.val();i.browseList(e);var n=i.$list.find("li"),a=n.filter(".visible").first();0!==a.length?(i.$list.show(),t(a).addClass("focus").siblings().removeClass("focus")):(i.$list.hide(),i.$list.find(".focus").removeClass("focus"))}).on("setValue",function(t,s){i.$list.hide(),i.$hiddenInput.val(s),"function"==typeof i.set.callback&&i.set.callback(vale)}),i.$list.on("select","li",function(){i.$el.val(t(this).text()).trigger("setValue",t(this).val())}).on("mousedown","li",function(s){t(this).trigger("select")}).on("mouseover","li",function(){t(this).addClass("focus").siblings().removeClass("focus")})})}}(jQuery);
